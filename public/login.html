<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="format-detection" content="telephone=no">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" type="text/css" href="http://pub.froup.net/hoomic/publicJs/reset.css">
	<title>登录</title>
	<style type="text/css">
	
	</style>
</head>
<body>
	<div class="wrap" id="wrap">
		<div>
			<label for="">账号：</label>
			<input type="text" v-model="username" :value="username">
		</div>
		<div>
			<label for="">密码：</label>
			<input type="text" v-model="password" :value="password">
		</div>
		<div>
			<input type="submit" value="登录" @click="login">
		</div>
		<div>
			<input type="submit" value="是否过期" @click="check">
		</div>
		<hr>
		<hr>
		<div>
			<label for="">账号：</label>
			<input type="text" v-model="username" :value="username">
		</div>
		<div>
			<label for="">密码：</label>
			<input type="text" v-model="password" :value="password">
		</div>
		<div>
			<input type="submit" value="注册" @click="register">
		</div>
	</div>
	<script src="http://pub.froup.net/hoomic/publicJs/vue.min.js" type="text/javascript"></script>
	<script src="http://pub.froup.net/hoomic/publicJs/zepto.min.js" type="text/javascript"></script>
	<script type="text/javascript">


		var vm = new Vue({
			el: "#wrap",
			data: {
				username: "zheng",
				password: "0000",
				token: "",
			},
			methods: {
				login(){
					var _this = this; 
					$.ajax({
						url: "http://localhost:3000/login",
						data: {
							username: _this.username,
							password: _this.password,
						},
						type: "post",
						dataType: "json",
						success: function(res){
							_this.token = res.body.token;
							console.log(res)
						},
						error: function(){
							console.log("ajax-error")
						}
					})
				},
				check(){
					var _this = this; 
					$.ajax({
						url: "http://localhost:3000/check",
						data: {
							token: _this.token,
						},
						type: "post",
						dataType: "json",
						success: function(res){
							console.log(res)
						},
						error: function(){
							console.log("ajax-error")
						}
					})
				},
				register(){
					var _this = this; 
					$.ajax({
						url: "http://localhost:3000/register",
						data: {
							username: _this.username,
							password: _this.password,
						},
						type: "post",
						dataType: "json",
						success: function(res){
							console.log(res)
						},
						error: function(){
							console.log("ajax-error")
						}
					})
				}
			}
		})
	</script>
</body>
</html>

<!-- 	

前端页面：
1.获取最近中奖者
2.更新基本信息 （奖池，用户觅钻，开奖时间）
3.请求开奖
4.获取留言(分页)
5.发送留言
5.获取50条开奖记录
6.获取投注记录
7.下单请求
8.注册账号
9.登录
10.注销

返回格式：
{
	code: 0, //其他为100 101 102
	body: "",
	msg: "",
}

1.获取最近中奖者
api: /api/nearestWinner
type: get
data: ""
res: [{
	username: "",
	userid: "",
	userpic: "",
	preiods: 2017052612 //期数
}]

2.更新基本信息 （奖池，用户觅钻，开奖时间）
api: /api/newestOpenLotteryTime
type: get
data: ""
res: {
	serverCurrentTime: 当前毫秒数,
	newestOpenLotteryTime: 开奖时间毫秒数,
	lotteryPool: "奖池"，
	mizu: ,
}

3.请求开奖  
api: /api/openLotteryResult
type: get
data: {
	preiods: 2017052612
}
// 有可能还没开奖 奖池清零
res: {
	openLotteryResult：[{},{},{}]
}

3.下单请求  
api: /api/confirmOrder
type: get
// 一次可以下多单
data: {
	preiods: 2017052612,
	options: "0110100000000000,0110100000000000,0110100000000000", // 0110100000000000 表示下注:2,3,5三个号码
}
res: {
	result：0, 非0为失败
	message: "下单成功",
	mizu: ,
}


登录
api: /api/login
type: get
data: {
	username: ,
	password: ,
}
res: {
	token: "",
	username: "",
	userpic: "",

}



数据库
用户表：
userid username password userpic sex age mizu token 创建时间

所有用户购彩订单信息表：
orderId userid betOptions bet（投入觅钻） status preiods（期号） 下单时间 

历史开奖表：
preiods（期号） options  







-->


